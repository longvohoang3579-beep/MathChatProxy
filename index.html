<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>AI Assistant Pro</title>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<style>
body {
  background-color:#0f0f13; color:#fff; font-family:'Segoe UI',sans-serif;
  margin:0; padding:0; overflow:hidden;
}

/* ---------- Intro ---------- */
#intro-screen {
  position: fixed;
  top:0; left:0; width:100%; height:100vh;
  background:black;
  display:flex; align-items:center; justify-content:center;
  flex-direction:column; z-index:1000;
  transition:opacity 1.5s ease;
}
#intro-video {
  position:absolute; top:0; left:0;
  width:100%; height:100%; object-fit:cover; opacity:0.4;
}
#intro-text {
  position:relative;
  color:#facc15;
  font-size:2rem; font-weight:bold;
  text-shadow:0 0 15px rgba(255,255,150,0.8);
  animation:fadeIn 2s ease-in-out;
}
@keyframes fadeIn {
  from {opacity:0; transform:scale(0.9);}
  to {opacity:1; transform:scale(1);}
}

/* ---------- Main Container ---------- */
.container {max-width:900px;margin:2rem auto;background:#1a1c29;border-radius:1.5rem;padding:1.5rem;box-shadow:0 15px 30px rgba(0,0,0,0.7);display:none;}
.tabs {display:flex;border-bottom:2px solid #333;margin-bottom:1rem;}
.tab-btn {flex:1;text-align:center;padding:1rem;cursor:pointer;color:#aaa;font-weight:bold;transition:all 0.2s;}
.tab-btn.active {color:#fff;border-bottom:3px solid #facc15;}
.tab-content {display:none;}
.tab-content.active {display:block;}
.chat-box {background:#111827;border-radius:12px;padding:1rem;height:400px;overflow-y:auto;display:flex;flex-direction:column;}
.bubble {max-width:80%;padding:10px 14px;border-radius:12px;margin-bottom:10px;line-height:1.5;word-wrap:break-word;white-space:pre-wrap;}
.user-bubble {background:#2563eb;align-self:flex-end;color:white;border-bottom-right-radius:2px;}
.ai-bubble {background:#374151;align-self:flex-start;color:#e5e7eb;border-bottom-left-radius:2px;}
mark.highlight {background-color:#fde047;color:black;font-weight:bold;padding:0 3px;border-radius:3px;}
textarea,input{width:100%;padding:0.75rem;border-radius:0.75rem;background:#1e1e2a;border:1px solid #333;color:white;resize:none;outline:none;}
button{padding:0.75rem 1rem;border-radius:0.75rem;font-weight:bold;cursor:pointer;transition:all 0.2s;}
#btnCreateImage{background:#10b981;color:#111827;}#btnCreateImage:hover{background:#059669;}
#btnChat{background:#6366f1;color:white;}#btnChat:hover{background:#4f46e5;}
#btnMath{background:#f59e0b;color:#111827;}#btnMath:hover{background:#d97706;}
img.generated-image{border-radius:12px;max-width:100%;margin-top:1rem;}
#settings-btn{position:absolute;top:1rem;right:1rem;font-size:1.5rem;cursor:pointer;color:#facc15;}
#settings-modal{position:absolute;top:3rem;right:1rem;width:200px;background:#1a1c29;border:1px solid #facc15;border-radius:0.75rem;padding:1rem;display:none;}
.pending-preview{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px;}
.pending-preview img{width:60px;height:60px;object-fit:cover;border-radius:8px;border:2px solid #475569;}
.input-row{display:flex;align-items:center;gap:6px;margin-top:8px;}
.icon-btn{background:#27293a;padding:8px;border-radius:8px;cursor:pointer;transition:0.2s;}
.icon-btn:hover{background:#3f4259;}
.icon-btn svg{width:22px;height:22px;color:#facc15;}
.send-btn{background:#6366f1;padding:10px;border-radius:50%;display:flex;align-items:center;justify-content:center;}
.send-btn:hover{background:#4f46e5;}
.send-btn svg{width:22px;height:22px;transform:rotate(0deg);}
.generated-video{border-radius:12px;max-width:100%;margin-top:1rem;}
</style>
<script src="https://unpkg.com/gif.js@0.2.0/dist/gif.js"></script>
<script src="https://unpkg.com/gif.js@0.2.0/dist/gif.worker.js"></script>
</head>

<body>
<!-- INTRO -->
<div id="intro-screen">
  <video id="intro-video" autoplay muted playsinline>
    <source src="https://cdn.pixabay.com/video/2022/10/25/136179-767617881_tiny.mp4" type="video/mp4" />
  </video>
  <div id="intro-text">‚ú® Welcome to <mark class="highlight">AI Assistant Pro</mark> ‚ú®</div>
</div>

<!-- MAIN -->
<div class="container relative" id="mainApp">
  <div id="settings-btn">‚öôÔ∏è</div>
  <div id="settings-modal">
    <label class="block mb-2">Ng√¥n ng·ªØ chat:</label>
    <select id="language-select" class="w-full p-2 rounded bg-gray-800 text-white">
      <option value="vi">Ti·∫øng Vi·ªát</option>
      <option value="en">English</option>
      <option value="zh-CN">ÁÆÄ‰Ωì‰∏≠Êñá</option>
    </select>
  </div>

  <div class="tabs">
    <div class="tab-btn active" data-tab="image">üñºÔ∏è T·∫°o ·∫¢nh</div>
    <div class="tab-btn" data-tab="chat">üí¨ Chat</div>
    <div class="tab-btn" data-tab="math">üßÆ Gi·∫£i To√°n</div>
    <div class="tab-btn" data-tab="video">üéûÔ∏è T·∫°o Video</div>
  </div>

  <div class="tab-content active" id="image">
    <div class="chat-box" id="imageBox"></div>
    <textarea id="imagePrompt" rows="2" placeholder="Nh·∫≠p m√¥ t·∫£ ·∫£nh..."></textarea>
    <button id="btnCreateImage" class="mt-2 w-full">T·∫°o ·∫¢nh</button>
  </div>

  <div class="tab-content" id="chat">
    <div class="chat-box" id="chatBox"></div>
    <div class="pending-preview" id="chatPreview"></div>
    <div class="input-row">
      <label class="icon-btn" for="chatFileInput" title="T·∫£i ·∫£nh ho·∫∑c file">üìÅ</label>
      <input type="file" id="chatFileInput" accept="image/*,.pdf,.txt,.docx" hidden />
      <label class="icon-btn" id="chatCameraBtn" title="Ch·ª•p ·∫£nh">üì∑</label>
      <textarea id="chatInput" rows="1" placeholder="Nh·∫≠p tin nh·∫Øn..."></textarea>
      <button id="btnChat" class="send-btn" title="G·ª≠i">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="white" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12l14 7-7-7 7-7-14 7z"/>
        </svg>
      </button>
    </div>
  </div>

  <div class="tab-content" id="math">
    <div class="chat-box" id="mathBox"></div>
    <div class="pending-preview" id="mathPreview"></div>
    <div class="input-row">
      <label class="icon-btn" for="mathFileInput" title="T·∫£i ·∫£nh ho·∫∑c file">üìÅ</label>
      <input type="file" id="mathFileInput" accept="image/*,.pdf,.txt,.docx" hidden />
      <label class="icon-btn" id="mathCameraBtn" title="Ch·ª•p ·∫£nh">üì∑</label>
      <textarea id="mathPrompt" rows="1" placeholder="Nh·∫≠p b√†i to√°n..."></textarea>
      <button id="btnMath" class="send-btn" title="Gi·∫£i">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="white" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12l14 7-7-7 7-7-14 7z"/>
        </svg>
      </button>
    </div>
  </div>

  <div class="tab-content" id="video">
    <div class="chat-box" id="videoBox"></div>
    <div class="pending-preview" id="videoPreview"></div>
    <div class="input-row">
      <label class="icon-btn" for="videoFileInput" title="T·∫£i ·∫£nh ho·∫∑c file">üìÅ</label>
      <input type="file" id="videoFileInput" accept="image/*" hidden />
      <label class="icon-btn" id="videoCameraBtn" title="Ch·ª•p ·∫£nh">üì∑</label>
      <textarea id="videoPrompt" rows="1" placeholder="Nh·∫≠p m√¥ t·∫£ video..."></textarea>
      <button id="btnVideo" class="send-btn" title="T·∫°o Video">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="white" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12l14 7-7-7 7-7-14 7z"/>
        </svg>
      </button>
    </div>
  </div>
</div>

<script>
function playIntro() {
  const intro = document.getElementById("intro-screen");
  const mainApp = document.getElementById("mainApp");

  // Gi·ªçng n√≥i nam huy·ªÅn b√≠
  const speak = new SpeechSynthesisUtterance("Welcome to AI Assistant Pro. Discover the power within you.");
  speak.lang = "en-US";
  speak.rate = 0.95;
  speak.pitch = 0.8;
  const voice = speechSynthesis.getVoices().find(v => v.lang.startsWith("en") && v.name.toLowerCase().includes("male"));
  if (voice) speak.voice = voice;
  speechSynthesis.speak(speak);

  // Sau 6s ·∫©n intro v√† hi·ªán app
  setTimeout(() => {
    intro.style.opacity = "0";
    setTimeout(() => {
      intro.style.display = "none";
      mainApp.style.display = "block";
      document.body.style.overflow = "auto";
    }, 1500);
  }, 6000);
}

// Gi·ªçng n√≥i c√≥ th·ªÉ ch∆∞a s·∫µn => ƒë·ª£i load voice xong
if (speechSynthesis.getVoices().length === 0) {
  speechSynthesis.onvoiceschanged = playIntro;
} else {
  playIntro();
}

/* Tabs */
const tabs=document.querySelectorAll(".tab-btn");
const contents=document.querySelectorAll(".tab-content");
tabs.forEach(tab=>tab.addEventListener("click",()=>{tabs.forEach(t=>t.classList.remove("active"));contents.forEach(c=>c.classList.remove("active"));tab.classList.add("active");document.getElementById(tab.dataset.tab).classList.add("active");}));
</script>
</body>
</html>
