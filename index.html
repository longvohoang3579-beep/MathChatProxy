<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Assistant Pro</title>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">

<style>
/* ---------- BODY & FONTS ---------- */
body {
  background: linear-gradient(145deg,#0b0d19,#1a1e36);
  color: #fff;
  font-family: 'Inter', sans-serif;
  margin: 0;
  padding-bottom: 60px;
}
.main-container {
  max-width: 3xl;
  background: #1a1e36;
  margin: auto;
  border-radius: 2rem;
  box-shadow: 0 20px 50px rgba(0,0,0,0.8);
  border: 1px solid #4a4e8d;
  overflow: hidden;
}
/* ---------- HEADER & TABS ---------- */
.tab-btn {
  flex: 1;
  padding: 1rem;
  cursor: pointer;
  text-align: center;
  font-weight: 700;
  color: #a1a6cc;
  transition: all 0.3s ease;
  position: relative;
}
.tab-btn::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  width: 0;
  height: 3px;
  background: #6a4cff;
  transition: all 0.3s ease;
  border-radius: 2px;
}
.tab-btn:hover::after {
  width: 60%;
  left: 20%;
}
.tab-btn.active {
  color: #fff;
  background: rgba(106,76,255,0.15);
}
.tab-btn.active::after {
  width: 100%;
  left: 0;
}
/* ---------- INPUT & TEXTAREA ---------- */
textarea {
  width: 100%;
  border-radius: 0.75rem;
  border: 1px solid #6a4cff;
  background: #2c3258;
  color: #fff;
  padding: 0.75rem;
  transition: all 0.3s ease;
}
textarea:focus {
  outline: none;
  border-color: #a78bfa;
  box-shadow: 0 0 0 3px rgba(167,139,250,0.5);
}
/* ---------- BUTTONS ---------- */
button {
  font-weight: 800;
  text-transform: uppercase;
  transition: all 0.3s ease;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  border-radius: 0.75rem;
}
#btnCreateImage { background: #34d399; color: #1a1e36; }
#btnCreateImage:hover { background: #10b981; }
#btnChat { background: #6a4cff; color: #fff; }
#btnChat:hover { background: #5d3dfa; }
#btnMath { background: #fbbf24; color: #1a1e36; }
#btnMath:hover { background: #f59e0b; }
/* ---------- CHAT BUBBLES ---------- */
.chat-history {
  background: #0b0d19;
  border: 1px solid #4a4e8d;
  padding: 1rem;
  border-radius: 1.5rem;
  flex-grow: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}
.user-message {
  align-self: flex-end;
  background: linear-gradient(135deg,#6a4cff,#8b6eff);
  color: #fff;
  padding: 0.75rem 1rem;
  border-radius: 1.5rem 1.5rem 0.5rem 1.5rem;
  max-width: 80%;
  word-break: break-word;
  box-shadow: 0 4px 15px rgba(106,76,255,0.4);
}
.ai-message {
  align-self: flex-start;
  background: linear-gradient(135deg,#2c3258,#3e446d);
  color: #fff;
  padding: 0.75rem 1rem;
  border-radius: 1.5rem 1.5rem 1.5rem 0.5rem;
  max-width: 80%;
  word-break: break-word;
  box-shadow: 0 4px 15px rgba(46,49,72,0.5);
}
mark.highlight {
  background-color: #fde047;
  color: #000;
  font-weight: bold;
  padding: 0 3px;
  border-radius: 3px;
}
/* ---------- MATH CONTAINER ---------- */
.math-container {
  background: #0b0d19;
  border: 2px solid #a78bfa;
  border-radius: 0.75rem;
  padding: 1rem;
  color: #fff;
  min-height: 120px;
}
/* ---------- IMAGE RESULT ---------- */
.generated-image-container img {
  border-radius: 1rem;
  max-width: 100%;
  box-shadow: 0 15px 40px rgba(0,0,0,0.7);
  transition: transform 0.3s ease;
}
.generated-image-container img:hover {
  transform: scale(1.02);
}
/* ---------- SETTINGS BUTTON ---------- */
#settings-btn { position: absolute; top:1rem; right:1rem; font-size:1.5rem; cursor:pointer; color:#a78bfa; }
#settings-modal {
  position: absolute; top:4rem; right:1rem; background: #1a1e36; border:1px solid #6a4cff;
  padding: 1rem; border-radius: 1rem; width: 14rem; display:none;
  box-shadow:0 8px 30px rgba(0,0,0,0.8);
}
#settings-modal.show { display:block; }
#settings-modal h3 { text-align:center; font-weight:700; color:#a78bfa; margin-bottom:0.5rem; }
</style>
</head>
<body class="min-h-screen flex flex-col items-center p-5 relative">

<div id="settings-btn"><i class="fas fa-cogs"></i></div>
<div id="settings-modal">
  <h3>C√ÄI ƒê·∫∂T AI</h3>
  <div>
    <label for="language-select" class="block text-sm font-medium mb-2 text-gray-300">NG√îN NG·ªÆ CHAT</label>
    <select id="language-select" class="w-full p-2 rounded-md focus:ring-2 focus:ring-[#a78bfa]">
      <option value="vi">Ti·∫øng Vi·ªát</option>
      <option value="en">English</option>
      <option value="zh-CN">ÁÆÄ‰Ωì‰∏≠Êñá</option>
    </select>
  </div>
</div>

<div class="main-container flex flex-col">
  <!-- TABS -->
  <div class="flex">
    <div class="tab-btn active" id="tab-image">üñºÔ∏è T·∫†O ·∫¢NH</div>
    <div class="tab-btn" id="tab-chat">üí¨ CHAT</div>
    <div class="tab-btn" id="tab-math">üßÆ GI·∫¢I TO√ÅN</div>
  </div>

  <!-- IMAGE -->
  <div id="content-image" class="p-6 flex flex-col gap-4">
    <textarea id="imagePrompt" rows="3" placeholder="Nh·∫≠p m√¥ t·∫£ ·∫£nh..."></textarea>
    <button id="btnCreateImage">T·∫°o ·∫¢nh AI</button>
    <div id="imageResult" class="mt-4 text-center text-gray-400"></div>
  </div>

  <!-- CHAT -->
  <div id="content-chat" class="p-6 hidden flex flex-col h-[500px]">
    <div id="chatHistory" class="chat-history"></div>
    <textarea id="chatPrompt" rows="2" placeholder="B·∫Øt ƒë·∫ßu cu·ªôc tr√≤ chuy·ªán m·ªõi..."></textarea>
    <button id="btnChat" class="mt-2">G·ª≠i</button>
  </div>

  <!-- MATH -->
  <div id="content-math" class="p-6 hidden flex flex-col gap-4">
    <textarea id
